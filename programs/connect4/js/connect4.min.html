<script>g="grey",t=0,w=7,h=6,d=document,d.i=d.getElementById,d.c=d.createElement,C=()=>t%2?"red":"blue",onload=()=>{for(f.a=f.appendChild,f.style.gridTemplateColumns=`repeat(${w}, 1fr)`,i=0;i<w;i++)b=d.c("button"),b.i=i,b.onclick=c,f.a(b);for(i=0;i<w*h;i++){let a=d.c("div");a.G=()=>a.style.backgroundColor,a.S=g=>a.style.backgroundColor=g,a.id=i,a.S(g),f.a(a)}},c=a=>p(a.target.i),p=a=>{e=d.i(a),a<w*h&&g==e.G()?p(a+w):(e=d.i(a-w),e.S(C()),k(a)&&(alert(C()+" won"),location.reload()),t++,d.body.style.background=C())},k=a=>(x=a%w,y=0|-1+a/w,c=C(),s=(g,j,l,m)=>{for(n=0,a=0;7>a;a++,g+=l,j+=m)if(!(0>g||g>=w||0>j||j>=h))if(e=d.i(g+j*w),e.G()!=c)n=0;else if(4<=(n+=1))return 1},s(x-3,y,1,0)||s(x,y-3,0,1)||s(x-3,y-3,1,1)||s(x+3,y-3,-1,1));</script><div id=f><style>body{background:blue}*{margin:5}#f{background:white;width:min-content;margin:auto;display:grid}#f>*{width:100;height:100}
